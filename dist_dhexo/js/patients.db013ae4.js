(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["patients"],{"2f63":function(t,e,a){},"430c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vLoginHeader"),a("div",{staticClass:"top"},[a("div",{staticClass:"box"},[a("div",{staticClass:"elbtn",on:{click:t.showDialogAdd}},[t._v("新 建")]),a("div",{staticClass:"elbtn",on:{click:t.handleUpdateAll}},[t._v("修 改")])])]),a("div",{staticClass:"main"},[a("div",{staticClass:"query-details patients-info"},[a("div",{staticClass:"block block1"},[a("div",{staticClass:"patients-tab"},[t._m(0),a("ul",{staticClass:"context"},[t.patientList.length>0?t._l(t.patientList,(function(e,i){return a("li",{key:i},[a("i",{staticClass:"el-icon-check edit-btn",class:{"is-edit":e.disabled},on:{click:function(a){return t.handleUpdate(e,i)}}}),a("p",[t._v(t._s(i+1))]),a("p",[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.patientName,callback:function(a){t.$set(e,"patientName",a)},expression:"item.patientName"}})],1),a("p",[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.showSex,callback:function(a){t.$set(e,"showSex",a)},expression:"item.showSex"}})],1),a("p",[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.age,callback:function(a){t.$set(e,"age",a)},expression:"item.age"}})],1),a("p",{staticClass:"idcard"},[t._v(t._s(e.idCard))]),a("p",[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.symptom,callback:function(a){t.$set(e,"symptom",a)},expression:"item.symptom"}})],1),a("p",[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.familyMedicalHistory,callback:function(a){t.$set(e,"familyMedicalHistory",a)},expression:"item.familyMedicalHistory"}})],1),a("p",[t._v(t._s(e.isResolve))]),a("p",[t._v(t._s(e.showCreateTime))]),a("p",{staticClass:"tools"},[a("span",{on:{click:function(a){return t.handleDeletePatient(e)}}},[t._v("删除")])])])})):[a("li",{staticClass:"no-data"},[t._v("暂无数据")])]],2),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"el-pagination",attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.patientListParams.pageNum},on:{"update:currentPage":function(e){return t.$set(t.patientListParams,"pageNum",e)},"update:current-page":function(e){return t.$set(t.patientListParams,"pageNum",e)},"current-change":t.getCurrentPage}})],1)])])])]),a("el-dialog",{staticClass:"eldialog add-dialog",attrs:{title:"新建患者",visible:t.dialogAdd,width:"682px","append-to-body":"",center:"","close-on-click-modal":!1,"before-close":t.closeAddDialog},on:{"update:visible":function(e){t.dialogAdd=e}}},[t.showDialogAddForm?a("el-form",{ref:"addForm",staticClass:"add-form",attrs:{rules:t.rules,model:t.addForm,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"姓名：",prop:"patientName"}},[a("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入姓名"},model:{value:t.addForm.patientName,callback:function(e){t.$set(t.addForm,"patientName",e)},expression:"addForm.patientName"}})],1),a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[a("div",{staticClass:"radio-box"},[a("el-radio",{attrs:{label:"MAN"},model:{value:t.addForm.sex,callback:function(e){t.$set(t.addForm,"sex",e)},expression:"addForm.sex"}},[t._v("男")]),a("el-radio",{attrs:{label:"GIRL"},model:{value:t.addForm.sex,callback:function(e){t.$set(t.addForm,"sex",e)},expression:"addForm.sex"}},[t._v("女")])],1)]),a("el-form-item",{attrs:{label:"年龄：",prop:"age"}},[a("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入年龄"},model:{value:t.addForm.age,callback:function(e){t.$set(t.addForm,"age",t._n(e))},expression:"addForm.age"}})],1),a("el-form-item",{attrs:{label:"身份证：",prop:"idCard"}},[a("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入身份证"},model:{value:t.addForm.idCard,callback:function(e){t.$set(t.addForm,"idCard",e)},expression:"addForm.idCard"}})],1),a("el-form-item",{attrs:{label:"症状：",prop:""}},[a("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入症状"},model:{value:t.addForm.symptom,callback:function(e){t.$set(t.addForm,"symptom",e)},expression:"addForm.symptom"}})],1),a("el-form-item",{attrs:{label:"家族病史：",prop:"familyMedicalHistory"}},[a("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入家族病史"},model:{value:t.addForm.familyMedicalHistory,callback:function(e){t.$set(t.addForm,"familyMedicalHistory",e)},expression:"addForm.familyMedicalHistory"}})],1)],1):t._e(),a("div",{staticClass:"bottom"},[a("div",{staticClass:"elbtn",on:{click:t.closeAddDialog}},[t._v("取消")]),a("div",{staticClass:"elbtn",on:{click:t.addPatient}},[t._v("确定")])])],1),a("AsideFix"),a("vFooter")],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"tit"},[a("span"),a("span",[t._v("姓名")]),a("span",[t._v("性别")]),a("span",[t._v("年龄")]),a("span",{staticClass:"idcard"},[t._v("身份证")]),a("span",[t._v("症状")]),a("span",[t._v("家族病史")]),a("span",[t._v("解读结果")]),a("span",[t._v("解读时间")]),a("span",[t._v("操作")])])}],r=(a("99af"),a("4de4"),a("4160"),a("a9e3"),a("8ba4"),a("ac1f"),a("1276"),a("159b"),a("c1df")),n=a.n(r),o=a("8468"),d=a("1c91"),l=a("3261"),c=a("5b51"),p={inject:["reload"],data:function(){var t=function(t,e,a){if(!e)return a(new Error("请输入年龄"));Number.isInteger(e)?e>200?a(new Error("年龄不能超过200")):a():a(new Error("请输入数字值"))},e=function(t,e,a){if(!e)return a(new Error("请输入身份证"));var i=Object(c["a"])(e),s=i.pass,r=i.tip;s?a():a(new Error(r)),a()};return{patientList:[],patientListParams:{isAgeAsc:"asc",isDateAsc:"asc",isNameAsc:"asc",pageNum:1,patientName:""},total:0,pageSize:10,info:{patientName:"张三",sex:"女",age:20,idCard:"",t1:"头痛",t2:"无",disabled:!0},moreArr:0,dialogAdd:!1,addForm:{patientName:"",sex:"MAN",age:"",idCard:"",symptom:"",familyMedicalHistory:""},rules:{patientName:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请输入性别",trigger:"change"}],age:[{validator:t,trigger:"blur"}],idCard:[{validator:e,trigger:"blur"}],symptom:[{required:!0,message:"症状不能为空",trigger:"blur"}]},showDialogAddForm:!1}},components:{vLoginHeader:o["a"],vFooter:d["a"],AsideFix:l["a"]},methods:{showDialogAdd:function(){this.dialogAdd=!0,this.showDialogAddForm=!0},addPatient:function(){var t=this;this.$refs["addForm"].validate((function(e){e&&t.$post(t.$Url.account.addPatient,{patientName:t.addForm.patientName,sex:t.addForm.sex,age:Number(t.addForm.age),idCard:t.addForm.idCard,symptom:t.addForm.symptom,familyMedicalHistory:t.addForm.familyMedicalHistory}).then((function(e){200===e.status?(t.$message({type:"success",duration:2e3,message:e.data}),t.dialogAdd=!1,t.addForm={patientName:"",sex:"MAN",age:""},t.reload()):t.$message({type:"error",duration:2e3,message:e.msg})})).catch((function(t){}))}))},closeAddDialog:function(){this.dialogAdd=!1,this.$refs["addForm"].resetFields()},getPatientList:function(){var t=this;this.$post(this.$Url.account.patientList,this.patientListParams).then((function(e){if(200===e.status){var a=e.data;a&&(a.list.forEach((function(t){t.disabled=!0,t.showSex=1===t.sex?"男":"女",t.symptom||(t.symptom="无"),t.familyMedicalHistory||(t.familyMedicalHistory="无"),t.isResolve=1===t.isResolve?"已解读":2===t.isResolve?"未解读":"正在解读";var e=n()(a.createTime).format("YYYY MM DD"),i=e.split(" ");t.showCreateTime="".concat(i[0],"/").concat(i[1],"/").concat(i[2])})),t.patientList=a.list,t.totle=a.total,t.pageSize=a.pageSize)}else t.$message({type:"error",duration:2e3,message:e.msg})})).catch((function(t){}))},getCurrentPage:function(t){this.patientListParams.pageNum=t,this.getPatientList()},handleUpdate:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.disabled)this.$set(this.patientList[e],"disabled",!1);else{var s=t.patientName,r="男"===t.showSex?"MAN":"GIRL",n=t.age,o=t.idCard,d=t.symptom,l=t.familyMedicalHistory,c=t.patientId;if(""===s)return void this.$message({type:"error",duration:2e3,message:"患者姓名不能为空"});if("男"!==t.showSex&&"女"!==t.showSex)return void this.$message({type:"error",duration:2e3,message:"请输入正确的患者性别"});if(Number(n)>300)return void this.$message({type:"error",duration:2e3,message:"请输入正确的患者年龄"});this.$post(this.$Url.account.patientUpdate,{patientName:s,patientId:c,sex:r,age:n,idCard:o,symptom:d,familyMedicalHistory:l}).then((function(t){200===t.status?(i?a.moreArr++:a.$message({type:"success",duration:2e3,message:t.data}),a.$set(a.patientList[e],"disabled",!0)):a.$message({type:"error",duration:2e3,message:t.msg})})).catch((function(t){}))}},handleUpdateAll:function(){var t=this,e=this.patientList.filter((function(t){return!1===t.disabled}));e.length===this.patientList.length?(this.moreArr=0,this.patientList.forEach((function(e,a){t.handleUpdate(e,a,!0)}))):e.length>0?this.patientList.forEach((function(t){t.disabled=!1})):(this.moreArr=0,this.patientList.forEach((function(e,a){t.handleUpdate(e,a,!0)})))},toInterpretation:function(t){var e=this.$router.resolve({name:"patientsInterpretation",query:{patientName:t.patientName,vcfId:t.jobId}});window.open(e.href,"_blank")},handleDeletePatient:function(t){var e=this;this.$confirm("是否删除患者?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$get(e.$Url.account.deletePatient,{patientId:Number(t.patientId)}).then((function(t){200===t.status?(e.$message({type:"success",message:t.data}),e.reload()):e.$message({type:"error",duration:2e3,message:t.msg})})).catch((function(t){}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}},watch:{moreArr:function(){this.moreArr>0&&this.moreArr>=this.patientList.length&&this.$message({type:"success",duration:2e3,message:"修改患者信息成功!"})}},mounted:function(){this.getPatientList()}},m=p,u=(a("ac05"),a("2877")),f=Object(u["a"])(m,i,s,!1,null,"b26a0d52",null);e["default"]=f.exports},"5b51":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("ac1f"),a("1276");var i={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};function s(t){if(""===t)return{pass:!1,tip:"请输入身份证"};if(!t||!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(t))return{pass:!1,tip:"身份证号格式错误"};if(!i[t.substr(0,2)])return{pass:!1,tip:"身份证号格式错误"};if(18==t.length){t=t.split("");for(var e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],a=[1,0,"X",9,8,7,6,5,4,3,2],s=0,r=0,n=0,o=0;o<17;o++)r=t[o],n=e[o],s+=r*n;a[s%11];if(a[s%11]!=t[17])return{pass:!1,tip:"身份证号格式错误"}}return{pass:!0,tip:"验证通过"}}},"5e89":function(t,e,a){var i=a("861d"),s=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&s(t)===t}},"8ba4":function(t,e,a){var i=a("23e7"),s=a("5e89");i({target:"Number",stat:!0},{isInteger:s})},a9e3:function(t,e,a){"use strict";var i=a("83ab"),s=a("da84"),r=a("94ca"),n=a("6eeb"),o=a("5135"),d=a("c6b6"),l=a("7156"),c=a("c04e"),p=a("d039"),m=a("7c73"),u=a("241c").f,f=a("06cf").f,g=a("9bf2").f,h=a("58a8").trim,v="Number",b=s[v],y=b.prototype,N=d(m(y))==v,x=function(t){var e,a,i,s,r,n,o,d,l=c(t,!1);if("string"==typeof l&&l.length>2)if(l=h(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+l}for(r=l.slice(2),n=r.length,o=0;o<n;o++)if(d=r.charCodeAt(o),d<48||d>s)return NaN;return parseInt(r,i)}return+l};if(r(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var C,F=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof F&&(N?p((function(){y.valueOf.call(a)})):d(a)!=v)?l(new b(x(e)),a,F):x(e)},A=i?u(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;A.length>$;$++)o(b,C=A[$])&&!o(F,C)&&g(F,C,f(b,C));F.prototype=y,y.constructor=F,n(s,v,F)}},ac05:function(t,e,a){"use strict";var i=a("2f63"),s=a.n(i);s.a},c625:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},s=[],r=a("2877"),n={},o=Object(r["a"])(n,i,s,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=patients.db013ae4.js.map