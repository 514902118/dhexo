(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["variationQuery"],{1276:function(t,e,i){"use strict";var n=i("d784"),a=i("44e7"),s=i("825a"),r=i("1d80"),o=i("4840"),l=i("8aa5"),c=i("50c4"),f=i("14c3"),h=i("9263"),u=i("d039"),d=[].push,p=Math.min,v=4294967295,g=!u((function(){return!RegExp(v,"y")}));n("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(r(this)),s=void 0===i?v:i>>>0;if(0===s)return[];if(void 0===t)return[n];if(!a(t))return e.call(n,t,s);var o,l,c,f=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,g=new RegExp(t.source,u+"g");while(o=h.call(g,n)){if(l=g.lastIndex,l>p&&(f.push(n.slice(p,o.index)),o.length>1&&o.index<n.length&&d.apply(f,o.slice(1)),c=o[0].length,p=l,f.length>=s))break;g.lastIndex===o.index&&g.lastIndex++}return p===n.length?!c&&g.test("")||f.push(""):f.push(n.slice(p)),f.length>s?f.slice(0,s):f}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var a=r(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a,i):n.call(String(a),e,i)},function(t,a){var r=i(n,t,this,a,n!==e);if(r.done)return r.value;var h=s(t),u=String(this),d=o(h,RegExp),y=h.unicode,m=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(g?"y":"g"),_=new d(g?h:"^(?:"+h.source+")",m),I=void 0===a?v:a>>>0;if(0===I)return[];if(0===u.length)return null===f(_,u)?[u]:[];var b=0,D=0,P=[];while(D<u.length){_.lastIndex=g?D:0;var x,C=f(_,g?u:u.slice(D));if(null===C||(x=p(c(_.lastIndex+(g?0:D)),u.length))===b)D=l(u,D,y);else{if(P.push(u.slice(b,D)),P.length===I)return P;for(var w=1;w<=C.length-1;w++)if(P.push(C[w]),P.length===I)return P;D=b=x}}return P.push(u.slice(b)),P}]}),!g)},"1a7f":function(t,e,i){"use strict";i("b723")},"44e7":function(t,e,i){var n=i("861d"),a=i("c6b6"),s=i("b622"),r=s("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},9079:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{on:{click:t.handleHideDialog}},[i("vHeader"),i("div",{staticClass:"query-box query-box3"},[i("h5",[t._v("查找变异")]),i("div",{staticClass:"box"},[i("el-input",{staticClass:"query-inp",attrs:{placeholder:"请输入变异RS号"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.queryInp,callback:function(e){t.queryInp=e},expression:"queryInp"}},[i("i",{staticClass:"el-input__icon iconfont icon-sousuo1",attrs:{slot:"append"},on:{click:t.search},slot:"append"})])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetails,expression:"showDetails"}],staticClass:"query-details"},[i("h4",[i("p",{staticClass:"tit"},[i("span",[t._v(t._s(t.info.queryInpTxt))]),t.info.queryInpTxt&&""!==t.info.queryInpTxt?i("i",{staticClass:"collect",class:{collected:t.isCollected},on:{click:t.changeCollect}},[t._v(t._s(t.isCollected?"已收藏":"收藏"))]):t._e()])]),i("div",{staticClass:"block block1"},[t._m(0),i("ul",{staticClass:"brief-info"},[i("li",[i("i",[t._v("染色体位置")]),i("span",[t._v(t._s(t.info.chrStart))])]),i("li",[i("i",[t._v("基因名")]),i("span",[t._v(t._s(t.info.gene))])]),i("li",[i("i",[t._v("突变类型")]),i("span",[t._v(t._s(t.info.exonicfunc))])]),i("li",[i("i",[t._v("突变位点")]),i("span",[t._v(t._s(t.info.refAlt))])]),i("li",[i("i",[t._v("蛋白变化")]),i("span",[t._v(t._s(t.info.aachange))])]),i("li",[i("i",[t._v("位点危害性")]),i("span",[t._v(t._s(t.info.label))])]),i("li",[i("i",[t._v("MAF(亚洲)")]),i("span",[t._v(t._s(t.info.mafGnomad))])])])]),i("div",{staticClass:"block block2"},[t._m(1),i("div",{staticClass:"gene-tab"},[t._m(2),i("ul",{staticClass:"context"},[i("li",[i("p",{staticStyle:{"text-align":"center",flex:"1.6"}},["string"===typeof t.info.variantName?[t._v(t._s(t.info.variantName))]:[i("p",t._l(t.info.variantName,(function(e,n){return i("span",{key:n},[t._v(t._s(e.diseaseName)),i("br")])})),0)]],2),i("p",["string"===typeof t.info.variantPhenotype?[i("span",{staticClass:"spn",on:{mouseenter:function(e){return t.handleShowDialog(t.info.variantPhenotype,"variantPhenotype",e,"variantPhenotype")},click:function(e){return t.handleHideDialog2(t.info.variantPhenotype)}}},[t._v(" "+t._s(t.info.variantPhenotype)+" ")])]:t._l(t.info.variantPhenotype,(function(e,n){return i("span",{key:n,staticClass:"spn",on:{mouseenter:function(i){return t.handleShowDialog(e,"variantPhenotype",i,"variantPhenotype")},click:function(i){return t.handleHideDialog2(e)}}},[t._v(" "+t._s(e)),i("br")])}))],2),i("p",["string"===typeof t.info.variantInheritance?[t._v(t._s(t.info.variantInheritance))]:t._l(t.info.variantInheritance,(function(e,n){return i("span",{key:n,staticStyle:{display:"block"}},[t._v(" "+t._s(e)+" ")])}))],2),i("p",["string"===typeof t.info.variantSource?[t._v(t._s(t.info.variantSource))]:t._l(t.info.variantSource,(function(e,n){return i("span",{key:n,staticStyle:{display:"block"}},[t._v(" "+t._s(e)+" ")])}))],2),i("p",["string"===typeof t.info.variantPmid?[i("span",{staticClass:"spn",on:{click:function(e){return t.literatureClickHandle(t.info.variantPmid)}}},[t._v(" "+t._s(t.info.variantPmid)+" ")])]:t._l(t.info.variantPmid,(function(e,n){return i("span",{key:n,staticClass:"spn",staticStyle:{display:"block"},on:{click:function(i){return t.literatureClickHandle(e)}}},[t._v(" "+t._s(e)+t._s(Number(n)!==t.info.variantPmid.length-1?" ":"")+" ")])}))],2)])])])])]),i("el-dialog",{staticClass:"eldialog diff-dialog",attrs:{title:"变异信息",visible:t.dialogDiff,width:"700px","append-to-body":"",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogDiff=e}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.diffListData,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),i("el-table-column",{attrs:{prop:"rs",label:"RS"}}),i("el-table-column",{attrs:{prop:"chrStart",label:"染色体位置"}}),i("el-table-column",{attrs:{prop:"refAlt",label:"突变位点"}}),i("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.toDiff(e)}}},[t._v("跳转")])]}}])})],1)],1),t.showDialog1?i("InfoDialog",{attrs:{pos:t.InfoDiaPos,data:t.dialogInfo}}):t._e(),i("AsideFix"),i("vFooter")],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"title"},[i("em",[t._v("简要信息")]),i("span",[t._v("Brief information")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"title"},[i("em",[t._v("疾病关联")]),i("span",[t._v("Disease association")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"tit"},[i("span",{staticStyle:{"text-align":"center",flex:"1.6"}},[t._v("疾病名")]),i("span",[t._v("疾病ID")]),i("span",[t._v("遗传方式")]),i("span",[t._v("来源")]),i("span",[t._v("文献")])])}],s=(i("a4d3"),i("e01a"),i("4de4"),i("b0c0"),i("a9e3"),i("ac1f"),i("841c"),i("1276"),i("437c")),r=i("1c91"),o=i("3261"),l=i("91b4"),c={components:{vHeader:s["a"],vFooter:r["a"],AsideFix:o["a"],InfoDialog:l["a"]},data:function(){return{showDetails:!1,queryInp:"",isCollected:!1,currentCollectId:"",info:{queryInpTxt:"",chrStart:"",gene:"",exonicfunc:"",refAlt:"",aachange:"",label:"",mafGnomad:"",variantName:"",variantPhenotype:"",variantInheritance:"",variantSource:"",variantPmid:""},dialogDiff:!1,diffListData:[],hasDiffIndex:-1,showDialog1:!1,InfoDiaPos:{},dialogInfo:{}}},methods:{search:function(){var t=this;""!==this.queryInp?this.$get(this.$Url.query.variationbyRsId,{rsId:this.queryInp}).then((function(e){if(200===e.status){var i=e.data;if(i.length<=0)return t.showDetails=!1,void t.$message({type:"warning",duration:2e3,message:"查找的内容不存在"});if(t.showDetails=!0,i.length>0){-1!==t.hasDiffIndex&&t.hasDiffIndex;var n=i[0];if(t.getInfo(n),-1===t.hasDiffIndex){t.diffListData=[];for(var a=1;a<i.length;a++)if(i[a].rs!==n.rs||i[a].chr!==n.chr||i[a].start!==n.start||i[a].end!==n.end||i[a].ref!==n.ref||i[a].alt!==n.alt){var s={rs:i[a].rs,chrStart:i[a].chr+":"+(i[a].start===i[a].end?i[a].start:i[a].start+"-"+i[a].end)||"暂无",refAlt:i[a].ref+">"+i[a].alt||"暂无"};t.diffListData.push(s),t.dialogDiff=!0}}}else t.getInfo(i);t.$router.push({name:"variationQuery",query:{search:t.queryInp}}),t.getIsCollect()}})).catch((function(t){})):this.$message({type:"error",duration:2e3,message:"请输入查询内容"})},getInfo:function(t){var e=this;if(console.log(t),this.info.queryInpTxt=this.queryInp,this.info.chrStart=t.chr+":"+(t.start===t.end?t.start:t.start+"-"+t.end)||"暂无",this.info.gene=t.gene||"暂无",this.info.exonicfunc=t.exonicfunc||"暂无",this.info.refAlt=t.ref+">"+t.alt||"暂无",this.info.aachange=t.aachange||"暂无",this.info.label=t.label||"暂无",this.info.mafGnomad=t.mafGnomad||"暂无","string"===typeof t.variantPhenotype11?""!==t.variantPhenotype11?this.getDiseaseName(t.variantPhenotype11,(function(t){e.info.variantName=t[0].diseaseName})):this.info.variantName="暂无":(this.info.variantName=t.diseaseOmimList||"暂无",this.info.variantName=0==this.info.variantName.length?"暂无":this.info.variantName),this.info.variantPhenotype=t.variantPhenotype11||"暂无",this.info.variantInheritance=t.variantInheritance11||"暂无",this.info.variantSource=t.variantSource11||"暂无","string"===typeof t.variantPmid11){var i=t.variantPmid11?t.variantPmid11.split(","):[];this.info.variantPmid=i.length>0?i:"暂无"}else this.info.variantPmid=t.variantPmid11||"暂无"},handleShowDialog:function(t,e,i,n){var a=this;if("-"!==t){var s="";if("variantPhenotype"===e)s=this.info["variantPhenotype_thisDescription"];else if("variantPmid"===e)s=this.info["variantPmid_thisDescription"];else{this.info.variantPmidArr||(this.info.variantPmidArr=[]);var r=this.info.variantPmidArr.filter((function(e){return e.title===t}));r.length>0&&(s=r[0].description)}if(s||"variantPhenotype"!=n)if(s||"variantPmid"!=n){this.dialogInfo={title:t,description:s,type:"variantPhenotype"==e?"OMIM:"+t:"PMID:"+t},this.showDialog1=!0;var o=document.body.clientWidth,l=document.body.clientHeight;this.InfoDiaPos={pageX:i.pageX+300>o?i.pageX-380:i.pageX,pageY:i.pageY+300>l?i.pageY-300:i.pageY}}else this.$get(this.$Url.query.literature,{literatureId:t}).then((function(e){console.log("查询文献接口=========成功");var i=e.data;i&&a.info.variantPmidArr.push({title:t,description:e.data.literatureData,type:"PMID:"+t})})).catch((function(t){}));else this.$get(this.$Url.query.diseaseInformation,{OMIM_id:t}).then((function(n){if(200===n.status){var s=n.data;if(s){a.dialogInfo={title:t,description:s.Description||s.definition_orp||"暂无",type:"variantPhenotype"==e?"OMIM:"+t:"PMID:"+t},"variantPhenotype"===e?a.$set(a.info,"variantPhenotype_thisDescription",a.dialogInfo.description):"variantPmid"===e?a.$set(a.info,"variantPmid_thisDescription",a.dialogInfo.description):a.info.variantPmidArr.push({title:t,description:a.dialogInfo.description,type:"variantPhenotype"==e?"OMIM:"+t:"PMID:"+t}),a.showDialog1=!0;var r=document.body.clientWidth,o=document.body.clientHeight;a.InfoDiaPos={pageX:i.pageX+300>r?i.pageX-380:i.pageX,pageY:i.pageY+300>o?i.pageY-300:i.pageY}}}})).catch((function(t){}))}else this.showDialog1=!1},handleHideDialog:function(){this.showDialog1=!1},handleHideDialog2:function(t){var e=this.$router.resolve({name:"diseaseQuery",query:{search:t,active:1}});window.open(e.href,"_blank")},toDiff:function(t){var e=this.$router.resolve({name:"variationQuery",query:{search:this.queryInp,diff:t.$index}});window.open(e.href,"_blank")},getDiseaseName:function(t,e){this.$get(this.$Url.query.diseaseName,{rsId:t}).then((function(t){var i=t.data;i&&e&&e(i)})).catch((function(t){}))},getIsCollect:function(){var t=this;this.$post(this.$Url.collect.list).then((function(e){if(200===e.status){var i=e.data;if(i&&i.length>0){var n=i.filter((function(e){return e.name===t.queryInp}));n.length>0?(t.isCollected=!0,t.currentCollectId=n[0].id):t.isCollected=!1}}})).catch((function(t){}))},changeCollect:function(){var t=this;this.isCollected?this.$get(this.$Url.collect.delete,{collectId:this.currentCollectId}).then((function(e){200===e.status&&(t.$message({type:"success",duration:2e3,message:"取消收藏成功"}),t.isCollected=!1)})).catch((function(t){})):this.$post(this.$Url.collect.add,{name:this.queryInp,type:2,reservedOne:"",reservedTow:""}).then((function(e){200===e.status?(t.$message({type:"success",duration:2e3,message:"收藏成功"}),t.currentCollectId=e.data&&e.data.id||"",t.isCollected=!0):t.$message({type:"error",duration:2e3,message:e.msg})})).catch((function(t){}))},literatureClickHandle:function(t){console.log(t),window.open("https://pubmed.ncbi.nlm.nih.gov/".concat(t))}},mounted:function(){var t=this.$route.query;t.search&&(this.queryInp=t.search,t.diff?(this.hasDiffIndex=Number(t.diff),this.search()):(this.queryInp=t.search,this.search()))}},f=c,h=(i("1a7f"),i("2877")),u=Object(h["a"])(f,n,a,!1,null,"4dc9b8c1",null);e["default"]=u.exports},b723:function(t,e,i){}}]);
//# sourceMappingURL=variationQuery.d1e76ef7.js.map